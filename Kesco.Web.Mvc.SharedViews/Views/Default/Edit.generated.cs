#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.225
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Kesco.Web.Mvc.SharedViews.Views.Default
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using Kesco.Web.Mvc;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "1.4.1.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Default/Edit.cshtml")]
    public class Edit : Kesco.Web.Mvc.SharedViews.SharedViewPage<Kesco.Web.Mvc.SharedViews.Models.IndexViewModel>
    {
        public Edit()
        {
        }
        public override void Execute()
        {


            
            #line 2 "..\..\Views\Default\Edit.cshtml"
  
    ViewBag.Title = "Редактирование документа";
    Layout = "~/Views/Shared/_Layout.cshtml";


            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<div id=\"");


            
            #line 8 "..\..\Views\Default\Edit.cshtml"
     Write(ViewData.TemplateInfo.HtmlFieldPrefix);

            
            #line default
            #line hidden
WriteLiteral("__Container\" style=\"overflow: auto;\">\r\n");


            
            #line 9 "..\..\Views\Default\Edit.cshtml"
 using (Html.BeginForm("Save", null, FormMethod.Post, new { id = ViewData.TemplateInfo.HtmlFieldPrefix+"__Form"}))
{
	Html.EnableClientValidation();
    
            
            #line default
            #line hidden
            
            #line 12 "..\..\Views\Default\Edit.cshtml"
Write(Html.EditorFor(x => x.Model));

            
            #line default
            #line hidden
            
            #line 12 "..\..\Views\Default\Edit.cshtml"
                                 

            
            #line default
            #line hidden
WriteLiteral("\t<hr />\r\n");



WriteLiteral("\t<button type=\"submit\" id=\"");


            
            #line 14 "..\..\Views\Default\Edit.cshtml"
                       Write(ViewData.TemplateInfo.HtmlFieldPrefix);

            
            #line default
            #line hidden
WriteLiteral("__Submit\" style=\"display: none;\" >Сохранить</button>\r\n");



WriteLiteral(@"	<script type=""text/javascript"">

		window.handleRequest_Dummy_ResponsibleEmployeePhone = function(request) {
			request.employeeID = ViewModel.Model.ResponsibleEmployeeID();
		}

		window.handleRequest_Dummy_ResponsibleEmployeeEmail = function(request) {
			request.employeeID = ViewModel.Model.ResponsibleEmployeeID();
		}

		window.handleRequest_Dummy_ResponsibleEmployeeMsn = function(request) {
			request.employeeID = ViewModel.Model.ResponsibleEmployeeID();
		}

		function dispatchCommand_Dummy_ResponsibleID(command) {
			dispatchCommand_EmployeeControl(""Dummy_ResponsibleID"", command)
		}

		function dispatchCommand_Dummy_SignedBy(command) {
			dispatchCommand_EmployeeControl(""Dummy_SignedBy"", command)
		}

		function dispatchCommand_EmployeeControl(controlID, command) {
			var $lookup = $(""#""+controlID);
			var url; 
			var callbackUrl = encodeURIComponent('");


            
            #line 40 "..\..\Views\Default\Edit.cshtml"
                                     Write(Url.FullPathAction("DialogResult", "Default"));

            
            #line default
            #line hidden
WriteLiteral("\');\r\n\t\t\tvar item = $lookup.selectBox(\"getValue\");\r\n\t\t\tswitch(command) {\r\n\t\t\t\tcase" +
" \'advSearch\':\r\n\t\t\t\t\tif (window.console) console.log(\"advSearch\", item);\r\n\t\t\t\t\tur" +
"l = \"");


            
            #line 45 "..\..\Views\Default\Edit.cshtml"
        Write(Configuration.AppSettings.URI_user_search);

            
            #line default
            #line hidden
WriteLiteral(@"?return=1&clid=62&mvc=1&callbackKey=c1&callbackUrl={0}&search={1}"";
					url = $.validator.format(url, callbackUrl, encodeURIComponent(item.label));
					openPopupWindow(url, null, function(result) {
							if (result) {
								var item = $.isArray(result) ? result[0] : result;
								$lookup.selectBox(""setValue"", item);
							}
						}, 'EmployeeLookup', 800, 600, { centerScreen: 1 });
					return false;
					break;
				case 'view':
					url = '");


            
            #line 56 "..\..\Views\Default\Edit.cshtml"
        Write(Configuration.AppSettings.URI_user_form);

            
            #line default
            #line hidden
WriteLiteral("?id={0}\';\r\n\t\t\t\t\turl = $.validator.format(url, \"\" + item.value);\r\n\t\t\t\t\topenPopupWi" +
"ndow(url, null, null, \'wndPerson_\' + controlID, 800, 600, { close: false });\r\n\t\t" +
"\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\t\r\n\t</script>\r\n");


            
            #line 65 "..\..\Views\Default\Edit.cshtml"
}

            
            #line default
            #line hidden
WriteLiteral("</div>\r\n\r\n<script type=\"text/javascript\" language=\"javascript\">\r\n\t$(function () {" +
"\r\n\t\t");



WriteLiteral("\r\n\t\t$(window).resize(function() {\r\n\t\t\tvar $parent = $(\"#dialogContentPane\");\r\n\t\t\t" +
"$(\"#");


            
            #line 75 "..\..\Views\Default\Edit.cshtml"
   Write(ViewData.TemplateInfo.HtmlFieldPrefix);

            
            #line default
            #line hidden
WriteLiteral("__Container\").width($parent.width())\r\n\t\t\t$(\"#");


            
            #line 76 "..\..\Views\Default\Edit.cshtml"
   Write(ViewData.TemplateInfo.HtmlFieldPrefix);

            
            #line default
            #line hidden
WriteLiteral("__Container\").height($parent.height())\r\n\t\t});\r\n\r\n\t\t$(\"#");


            
            #line 79 "..\..\Views\Default\Edit.cshtml"
  Write(ViewData.TemplateInfo.HtmlFieldPrefix);

            
            #line default
            #line hidden
WriteLiteral(@"__Form"").submit(function () {
			if ($(this).valid()) { // Проверка валидности формы
				$.ajax({ // выполнить  Ajax запрос
					url: this.action,
					type: ""POST"",
					dataType: ""json"",
					data: ko.toJSON({
                        Model: ko.mapping.toJS(ViewModel.Model)
                    }),
					contentType: 'application/json; charset-utf8',
					success: function (response) {
						if (response.status == ""ok"") {
							window.location = """);


            
            #line 91 "..\..\Views\Default\Edit.cshtml"
                      Write(Url.Action("Index", "Default"));

            
            #line default
            #line hidden
WriteLiteral(@""";
							return;
						}
						if (response.status == ""error"") {
							ajaxError(response.error.Content || response.error, response.error_details.Errors || response.error_details);
							return;
						}
					}
				});
			}
			return false;
		});

		ViewModel.Model.ResponsibleEmployeeID.subscribe(function(newValue) {
			if (!newValue) {
				$(""#Model_ResponsibleEmployeePhone"").selectBox(""setValue"", { value: """", label: """"});
				$(""#Model_ResponsibleEmployeeEmail"").selectBox(""setValue"", { value: """", label: """"});
				$(""#Model_ResponsibleEmployeeMsn"").selectBox(""setValue"", { value: """", label: """"});
			}
		});

	});

	function ajaxError(errMsg, errDetails) {
		var errDetails2 = ""<ul>"";
		$.map(errDetails, function(item, index) {
				if (item) {
					if (item.ErrorMessage) {
						errDetails2 += ""<li>""+(item.ErrorMessage || item.Exception.Message)+""</li>"";
					} else if (item.Errors) {
						$.map(item.Errors, function(err) {
							errDetails2 += ""<li>""+(err.ErrorMessage || err.Exception.Message)+""</li>"";
						});
					}
				}
			});
		errDetails2 += ""</ul>"";
		alertMessage(""Ошибка приложения N2"", """"+errMsg+""""+errDetails2+"""", ""OK"");
	}

</script>

");


DefineSection("Header", () => {

WriteLiteral("\r\n    <button type=\"button\" data-bind=\"jqueryui: { widget: \'button\', options: { i" +
"cons: { primary: \'ui-icon-disk\' } }}, \r\n\t\tclick: function() {\r\n\t\t\t$(\'#");


            
            #line 136 "..\..\Views\Default\Edit.cshtml"
   Write(ViewData.TemplateInfo.HtmlFieldPrefix);

            
            #line default
            #line hidden
WriteLiteral("__Submit\').click();\r\n\t\t}\r\n\t\t\" >Сохранить</button>\r\n&nbsp;\r\n");


});

WriteLiteral("\r\n\r\n");


DefineSection("Footer", () => {

WriteLiteral("\r\n\t");


            
            #line 143 "..\..\Views\Default\Edit.cshtml"
Write(Html.DisplayFor(m => m.Model,"ChangedByInfo"));

            
            #line default
            #line hidden
WriteLiteral("\r\n\t&nbsp;\r\n");


});


        }
    }
}
#pragma warning restore 1591
